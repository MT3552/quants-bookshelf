<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quant's Bookshelf</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="container mx-auto px-4 py-8">
        <header class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4">
            <div class="text-center sm:text-left">
                <h1 class="text-3xl font-bold text-white">Quant's Bookshelf</h1>
                <p class="text-md text-gray-400 mt-1">by Martin Tonikyan, PhD</p>
            </div>
            <div class="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-4 w-full sm:w-auto">
                <input type="text" id="searchInput" placeholder="Search by title..." class="bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 w-full sm:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <select id="categoryFilter" class="bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 w-full sm:w-auto focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="all">All Categories</option>
                    <!-- Categories will be populated by JS -->
                </select>
            </div>
        </header>

        <div class="overflow-x-auto bg-gray-800 rounded-lg shadow">
            <table class="min-w-full">
                <thead class="bg-gray-700">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Title</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Author</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Tags</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Category</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Difficulty</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Cover</th>
                    </tr>
                </thead>
                <tbody id="book-table-body" class="divide-y divide-gray-700">
                    <!-- Book rows will be inserted here by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        const books = [
            { title: "A Random Walk Down Wall Street", author: "Burton G. Malkiel", tags: ["Investing", "Personal Finance"], category: "Career", difficulty: "Introductory" },
            { title: "Active Portfolio Management: A Quantitative Approach", author: "Grinold & Kahn", tags: ["Quantitative Investing"], category: "Quantitative Trading", difficulty: "Advanced" },
            { title: "Advances in Financial Machine Learning", author: "Marcos Lopez de Prado", tags: ["Machine Learning", "Finance"], category: "Machine Learning", difficulty: "Advanced" },
            { title: "An Introduction to High-Frequency Finance", author: "Derman, E. & Miller M.", tags: ["High-Frequency Trading"], category: "Quantitative Trading", difficulty: "Advanced" },
            { title: "Convex Optimization", author: "Boyd & Vandenberghe", tags: ["Optimization", "Mathematics"], category: "Mathematics", difficulty: "Advanced" },
            { title: "Deep Learning", author: "Goodfellow, Bengio, Courville", tags: ["Deep Learning", "AI"], category: "Machine Learning", difficulty: "Advanced" },
            { title: "Effective C++", author: "Scott Meyers", tags: ["C++", "Programming"], category: "Programming", difficulty: "Intermediate" },
            { title: "Financial Modeling Using C++", author: "Chirag D. Joshi", tags: ["C++", "Financial Modeling"], category: "Programming", difficulty: "Intermediate" },
            { title: "Fooled by Randomness", author: "Nassim Nicholas Taleb", tags: ["Probability", "Philosophy"], category: "Career", difficulty: "Introductory" },
            { title: "Heard on the Street", author: "Timothy Falcon Crack", tags: ["Interview Prep"], category: "Career", difficulty: "Introductory" },
            { title: "Inside the Black Box", author: "Rishi K. Narang", tags: ["Quantitative Trading"], category: "Quantitative Trading", difficulty: "Intermediate" },
            { title: "Interest Rate Models - Theory and Practice", author: "Brigo & Mercurio", tags: ["Interest Rate Derivatives"], category: "Quantitative Finance", difficulty: "Advanced" },
            { title: "Liar's Poker", author: "Michael Lewis", tags: ["Wall Street", "Biography"], category: "Career", difficulty: "Introductory" },
            { title: "Linear Algebra Done Right", author: "Sheldon Axler", tags: ["Linear Algebra", "Mathematics"], category: "Mathematics", difficulty: "Introductory" },
            { title: "Monte Carlo Methods in Financial Engineering", author: "Paul Glasserman", tags: ["Monte Carlo", "Quantitative Finance"], category: "Quantitative Finance", difficulty: "Advanced" },
        ];

        const bookTableBody = document.getElementById('book-table-body');
        const searchInput = document.getElementById('searchInput');
        const categoryFilter = document.getElementById('categoryFilter');

        // Populate category filter
        const categories = [...new Set(books.map(book => book.category))];
        categories.sort().forEach(category => {
            const option = document.createElement('option');
            option.value = category;
            option.textContent = category;
            categoryFilter.appendChild(option);
        });

        const fetchBookCover = async (title, author) => {
            try {
                const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=intitle:${encodeURIComponent(title)}+inauthor:${encodeURIComponent(author)}`);
                const data = await response.json();
                if (data.items && data.items.length > 0) {
                    const book = data.items[0];
                    return book.volumeInfo.imageLinks?.thumbnail || 'https://placehold.co/80x120/374151/9CA3AF?text=No+Cover';
                }
            } catch (error) {
                console.error('Error fetching book cover:', error);
            }
            return 'https://placehold.co/80x120/374151/9CA3AF?text=No+Cover';
        };

        const renderBooks = async (filteredBooks) => {
            bookTableBody.innerHTML = '<tr><td colspan="6" class="text-center py-8"><div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto"></div></td></tr>';
            const rows = await Promise.all(filteredBooks.map(async book => {
                const coverUrl = await fetchBookCover(book.title, book.author);
                const difficultyColor = book.difficulty === 'Advanced' ? 'text-red-400' : book.difficulty === 'Intermediate' ? 'text-yellow-400' : 'text-green-400';
                return `
                    <tr class="hover:bg-gray-700">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-white">${book.title}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">${book.author}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            ${book.tags.map(tag => `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-600 text-gray-200">${tag}</span>`).join(' ')}
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">${book.category}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm ${difficultyColor}">${book.difficulty}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                            <img src="${coverUrl}" alt="Cover for ${book.title}" class="h-20 w-auto rounded-md" onerror="this.onerror=null;this.src='https://placehold.co/80x120/374151/9CA3AF?text=Error';">
                        </td>
                    </tr>
                `;
            }));
            bookTableBody.innerHTML = rows.join('');
        };

        const filterAndRender = () => {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedCategory = categoryFilter.value;

            const filteredBooks = books.filter(book => {
                const titleMatch = book.title.toLowerCase().includes(searchTerm);
                const categoryMatch = selectedCategory === 'all' || book.category === selectedCategory;
                return titleMatch && categoryMatch;
            });
            renderBooks(filteredBooks);
        };

        searchInput.addEventListener('input', filterAndRender);
        categoryFilter.addEventListener('change', filterAndRender);

        // Initial render
        renderBooks(books);
    </script>

</body>
</html>
